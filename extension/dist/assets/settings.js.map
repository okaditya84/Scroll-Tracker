{"version":3,"file":"settings.js","sources":["../../src/storage/settings.ts"],"sourcesContent":["export interface ExtensionSettings {\r\n  blocklist: string[];\r\n  dataRetentionDays: number; // number of days to keep queued/local data\r\n}\r\n\r\nconst STORAGE_KEY = 'scrollwise-settings';\r\n\r\nconst DEFAULTS: ExtensionSettings = {\r\n  blocklist: [],\r\n  dataRetentionDays: 30\r\n};\r\n\r\nexport const getSettings = async (): Promise<ExtensionSettings> => {\r\n  const raw = await chrome.storage.local.get(STORAGE_KEY);\r\n  const data = raw[STORAGE_KEY] as Partial<ExtensionSettings> | undefined;\r\n  return { ...DEFAULTS, ...(data ?? {}) };\r\n};\r\n\r\nexport const setSettings = async (settings: Partial<ExtensionSettings>) => {\r\n  const current = await getSettings();\r\n  const next = { ...current, ...settings };\r\n  await chrome.storage.local.set({ [STORAGE_KEY]: next });\r\n  return next;\r\n};\r\n\r\nexport const addToBlocklist = async (domain: string) => {\r\n  const settings = await getSettings();\r\n  if (settings.blocklist.includes(domain)) return settings;\r\n  const next = { ...settings, blocklist: [...settings.blocklist, domain] };\r\n  await chrome.storage.local.set({ [STORAGE_KEY]: next });\r\n  return next;\r\n};\r\n\r\nexport const removeFromBlocklist = async (domain: string) => {\r\n  const settings = await getSettings();\r\n  const next = { ...settings, blocklist: settings.blocklist.filter(d => d !== domain) };\r\n  await chrome.storage.local.set({ [STORAGE_KEY]: next });\r\n  return next;\r\n};\r\n\r\nexport default {\r\n  getSettings,\r\n  setSettings,\r\n  addToBlocklist,\r\n  removeFromBlocklist\r\n};\r\n"],"names":["STORAGE_KEY","DEFAULTS","getSettings","data","setSettings","settings","next","addToBlocklist","domain","removeFromBlocklist","d"],"mappings":"AAKA,MAAMA,EAAc,sBAEdC,EAA8B,CAClC,UAAW,CAAA,EACX,kBAAmB,EACrB,EAEaC,EAAc,SAAwC,CAEjE,MAAMC,GADM,MAAM,OAAO,QAAQ,MAAM,IAAIH,CAAW,GACrCA,CAAW,EAC5B,MAAO,CAAE,GAAGC,EAAU,GAAIE,GAAQ,CAAA,CAAC,CACrC,EAEaC,EAAc,MAAOC,GAAyC,CAEzE,MAAMC,EAAO,CAAE,GADC,MAAMJ,EAAA,EACK,GAAGG,CAAA,EAC9B,aAAM,OAAO,QAAQ,MAAM,IAAI,CAAE,CAACL,CAAW,EAAGM,EAAM,EAC/CA,CACT,EAEaC,EAAiB,MAAOC,GAAmB,CACtD,MAAMH,EAAW,MAAMH,EAAA,EACvB,GAAIG,EAAS,UAAU,SAASG,CAAM,EAAG,OAAOH,EAChD,MAAMC,EAAO,CAAE,GAAGD,EAAU,UAAW,CAAC,GAAGA,EAAS,UAAWG,CAAM,CAAA,EACrE,aAAM,OAAO,QAAQ,MAAM,IAAI,CAAE,CAACR,CAAW,EAAGM,EAAM,EAC/CA,CACT,EAEaG,EAAsB,MAAOD,GAAmB,CAC3D,MAAMH,EAAW,MAAMH,EAAA,EACjBI,EAAO,CAAE,GAAGD,EAAU,UAAWA,EAAS,UAAU,OAAOK,GAAKA,IAAMF,CAAM,CAAA,EAClF,aAAM,OAAO,QAAQ,MAAM,IAAI,CAAE,CAACR,CAAW,EAAGM,EAAM,EAC/CA,CACT"}