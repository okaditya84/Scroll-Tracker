import{c as T,j as e,r as a}from"./styles.js";import{g as C,a as E,r as U,s as $,b as A}from"./settings.js";const w=7,y=180,I="https://scroll-tracker.vercel.app",L=s=>{const l=s.trim();if(!l)return"";try{const i=/^https?:\/\//i.test(l)?l:`https://${l}`;return new URL(i).hostname.replace(/^www\./,"").toLowerCase()}catch{return l.replace(/^https?:\/\//i,"").replace(/^www\./i,"").split("/")[0].toLowerCase()}},B=()=>{const[s,l]=a.useState(null),[i,c]=a.useState(""),[x,m]=a.useState(30),[u,j]=a.useState(!0),[d,r]=a.useState(null),[h,b]=a.useState(!1),[g,p]=a.useState(!1),f=a.useCallback(async()=>{const t=await C();l(t),m(t.dataRetentionDays),j(!1)},[]);a.useEffect(()=>{f()},[f]),a.useEffect(()=>{if(!d)return;const t=window.setTimeout(()=>r(null),3200);return()=>window.clearTimeout(t)},[d]);const N=async()=>{const t=L(i);if(!t){r({variant:"error",message:"Enter a valid domain (e.g. example.com)."});return}if(s!=null&&s.blocklist.includes(t)){r({variant:"error",message:"That domain is already blocked."});return}p(!0);try{const o=await E(t);l(o),c(""),r({variant:"success",message:`Tracking disabled on ${t}`})}catch(o){console.error("[scrollwise] add domain failed",o),r({variant:"error",message:"Unable to add domain. Try again."})}finally{p(!1)}},k=async t=>{try{const o=await U(t);l(o),r({variant:"success",message:`${t} re-enabled for tracking`})}catch(o){console.error("[scrollwise] remove domain failed",o),r({variant:"error",message:"Unable to remove domain. Try again."})}},S=async()=>{b(!0);try{const t=await $({dataRetentionDays:x});l(t),r({variant:"success",message:`Local data retention set to ${t.dataRetentionDays} days`})}catch(t){console.error("[scrollwise] retention update failed",t),r({variant:"error",message:"Unable to save retention preference."})}finally{b(!1)}},R=async()=>{if(window.confirm("Reset extension settings to defaults?"))try{const t=await A();l(t),m(t.dataRetentionDays),r({variant:"success",message:"Settings restored to defaults."})}catch(t){console.error("[scrollwise] reset settings failed",t),r({variant:"error",message:"Unable to reset settings."})}},n=(s==null?void 0:s.blocklist)??[],D=a.useMemo(()=>n.length?`${n.length} ${n.length===1?"site is":"sites are"} excluded from tracking.`:"Tracking is currently enabled for every site.",[n.length]);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 text-white",children:e.jsxs("div",{className:"mx-auto flex max-w-4xl flex-col gap-8 px-6 py-12",children:[e.jsxs("header",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:"/logo.svg",alt:"Scrollwise",className:"h-12 w-12 rounded-xl bg-slate-800/70 p-2 shadow"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold tracking-tight text-white",children:"Scrollwise Settings"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Tune what the extension collects and how long it keeps your local data."})]})]}),e.jsx("button",{onClick:()=>chrome.tabs.create({url:`${I}/dashboard`}).catch(()=>{}),className:"rounded-lg border border-slate-700 bg-slate-800/80 px-4 py-2 text-sm font-medium text-slate-100 transition hover:border-slate-500 hover:bg-slate-700",children:"Open Dashboard"})]}),d&&e.jsx("div",{className:`rounded-xl border px-4 py-3 text-sm shadow-lg backdrop-blur transition ${d.variant==="success"?"border-emerald-500/40 bg-emerald-500/15 text-emerald-200":"border-rose-500/40 bg-rose-500/15 text-rose-200"}`,children:d.message}),e.jsxs("section",{className:"grid gap-8 md:grid-cols-2",children:[e.jsxs("article",{className:"rounded-2xl border border-slate-800 bg-slate-900/80 p-6 shadow-xl",children:[e.jsxs("header",{className:"mb-6 flex flex-col gap-1",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Per-site blocklist"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Exclude sensitive domains so Scrollwise ignores them entirely."})]}),e.jsxs("div",{className:"mb-5 flex flex-col gap-3 sm:flex-row",children:[e.jsx("input",{type:"text",value:i,onChange:t=>c(t.target.value),placeholder:"example.com",className:"w-full rounded-xl border border-slate-700 bg-slate-950/60 px-4 py-2.5 text-sm text-white outline-none transition placeholder:text-slate-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/40"}),e.jsx("button",{onClick:N,disabled:g||!i.trim(),className:"inline-flex items-center justify-center rounded-xl bg-blue-600 px-4 py-2.5 text-sm font-medium text-white transition hover:bg-blue-500 disabled:bg-slate-600 disabled:text-slate-300",children:g?"Adding…":"Add domain"})]}),e.jsx("p",{className:"mb-4 text-xs text-slate-500",children:D}),e.jsxs("div",{className:"space-y-2",children:[u&&e.jsx("div",{className:"space-y-2",children:[0,1,2].map(t=>e.jsx("div",{className:"h-10 animate-pulse rounded-xl bg-slate-800/50"},t))}),!u&&n.length===0&&e.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 px-4 py-6 text-center text-sm text-slate-400",children:"No domains are blocked yet. Add any site you consider private or distracting."}),!u&&n.length>0&&e.jsx("ul",{className:"grid gap-2",children:n.map(t=>e.jsxs("li",{className:"flex items-center justify-between rounded-xl border border-slate-800 bg-slate-950/60 px-4 py-2 text-sm text-slate-200",children:[e.jsx("span",{className:"truncate",children:t}),e.jsx("button",{onClick:()=>k(t),className:"text-xs font-medium text-slate-300 transition hover:text-rose-300",children:"Remove"})]},t))})]})]}),e.jsxs("article",{className:"flex flex-col rounded-2xl border border-slate-800 bg-slate-900/80 p-6 shadow-xl",children:[e.jsxs("header",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Local data retention"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Scrollwise queues events locally before upload. Choose how long that queue may live."})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-3 block text-xs font-medium uppercase tracking-wide text-slate-400",children:"Retention window"}),e.jsx("input",{type:"range",min:w,max:y,value:x,onChange:t=>m(Number(t.target.value)),className:"w-full accent-blue-500"}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-slate-500",children:[e.jsxs("span",{children:[w," days"]}),e.jsxs("span",{className:"text-sm font-semibold text-white",children:[x," days"]}),e.jsxs("span",{children:[y," days"]})]})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Scrollwise automatically prunes anything older than your retention window from the local queue. Uploaded data lives safely in your account until you delete it."}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{onClick:S,disabled:h,className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-blue-500 disabled:bg-slate-600",children:h?"Saving…":"Save retention"}),e.jsx("button",{onClick:R,className:"rounded-lg border border-slate-700 px-4 py-2 text-sm font-medium text-slate-300 transition hover:border-slate-500 hover:text-slate-100",children:"Reset to defaults"})]}),s&&e.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 px-4 py-3 text-xs text-slate-400",children:[e.jsx("p",{className:"font-medium text-slate-200",children:"Current snapshot"}),e.jsxs("p",{children:[s.blocklist.length," blocked ",s.blocklist.length===1?"domain":"domains"," · ",s.dataRetentionDays," day retention"]})]})]})]})]}),e.jsxs("section",{className:"rounded-2xl border border-slate-800 bg-slate-900/70 p-6 text-sm text-slate-400 shadow-lg",children:[e.jsx("h3",{className:"mb-2 text-base font-semibold text-white",children:"Need to manage more?"}),e.jsxs("ul",{className:"list-disc space-y-1 pl-5",children:[e.jsx("li",{children:"Use the web dashboard to export or delete your tracked history."}),e.jsx("li",{children:"Toggle tracking quickly from the popup, or pause it entirely when you need a break."}),e.jsx("li",{children:"Review our privacy note to understand how Scrollwise handles your data."})]})]})]})})},v=document.getElementById("options");v&&T(v).render(e.jsx(a.StrictMode,{children:e.jsx(B,{})}));
//# sourceMappingURL=index.html.js.map
